(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13c00098"],{"7de1":function(t,e,o){},"84d3":function(t,e,o){"use strict";o("7de1")},c46d:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px","margin-left":"25px"},attrs:{inline:!0,model:t.bomCondition}},[o("el-form-item",{attrs:{label:"产品编号"}},[o("el-input",{attrs:{placeholder:"请输入编号查询"},model:{value:t.bomCondition.productNo,callback:function(e){t.$set(t.bomCondition,"productNo",e)},expression:"bomCondition.productNo"}})],1),o("el-form-item",{attrs:{label:"物料编号"}},[o("el-input",{attrs:{placeholder:"请输入编号查询"},model:{value:t.bomCondition.materialNo,callback:function(e){t.$set(t.bomCondition,"materialNo",e)},expression:"bomCondition.materialNo"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1),o("el-form-item",[o("el-button",{attrs:{type:"danger"},on:{click:t.deleteAll}},[t._v("批量删除")])],1)],1),o("el-table",{ref:"multipleTable",staticClass:"tablessp",staticStyle:{width:"100%","margin-top":"8px","min-height":"700px"},attrs:{data:t.tableData,height:"200","highlight-current-row":"",fit:"",border:"","default-sort":{prop:"date",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),o("el-table-column",{attrs:{align:"center",label:"序号",width:"95",type:"index",index:t.typeIndex}}),o("el-table-column",{attrs:{prop:"materialNo",label:"物料编号",align:"center",sortable:"",width:"180"}}),o("el-table-column",{attrs:{prop:"productNo",label:"产品编号",align:"center",sortable:"",width:"180"}}),o("el-table-column",{attrs:{prop:"materialDesc",label:"物料描述",align:"center",sortable:"",width:"280"}}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleQuery(e.$index,e.row)}}},[t._v("详细信息 ")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1),o("el-dialog",{staticClass:"edit-form",attrs:{title:"编辑物料信息",visible:t.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFormVisible=e}}},[o("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"物料编号",prop:"materialNo"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.editForm.materialNo,callback:function(e){t.$set(t.editForm,"materialNo",e)},expression:"editForm.materialNo"}})],1),o("el-form-item",{attrs:{label:"产品编号",prop:"productNo"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.editForm.productNo,callback:function(e){t.$set(t.editForm,"productNo",e)},expression:"editForm.productNo"}})],1),o("el-form-item",{attrs:{label:"物料描述",prop:"materialDesc"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.materialDesc,callback:function(e){t.$set(t.editForm,"materialDesc",e)},expression:"editForm.materialDesc"}})],1),o("el-form-item",{attrs:{label:"工位",prop:"stationNo"}},[o("el-select",{attrs:{placeholder:"选择工位"},model:{value:t.editForm.stationNo,callback:function(e){t.$set(t.editForm,"stationNo",e)},expression:"editForm.stationNo"}},t._l(t.stationForm,(function(t,e){return o("el-option",{attrs:{label:t.stationName,value:t.stationNo}})})),1)],1),o("el-form-item",{attrs:{label:"数量(件)",prop:"productNum"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.productNum,callback:function(e){t.$set(t.editForm,"productNum",e)},expression:"editForm.productNum"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){return t.handleCancel("editForm")}}},[t._v("取消")]),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleUpdate("editForm")}}},[t._v("更新")])],1)],1),o("el-dialog",{staticClass:"edit-form",attrs:{title:"物料详细信息",visible:t.queryFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.queryFormVisible=e}}},[o("el-form",{ref:"editForm",attrs:{model:t.materialForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"物料编号",prop:"materialNo"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.materialNo,callback:function(e){t.$set(t.materialForm,"materialNo",e)},expression:"materialForm.materialNo"}})],1),o("el-form-item",{attrs:{label:"产品编号",prop:"productNo"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.productNo,callback:function(e){t.$set(t.materialForm,"productNo",e)},expression:"materialForm.productNo"}})],1),o("el-form-item",{attrs:{label:"物料描述",prop:"materialDesc"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.materialDesc,callback:function(e){t.$set(t.materialForm,"materialDesc",e)},expression:"materialForm.materialDesc"}})],1),o("el-form-item",{attrs:{label:"工位",prop:"stationName"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.stationName,callback:function(e){t.$set(t.materialForm,"stationName",e)},expression:"materialForm.stationName"}})],1),o("el-form-item",{attrs:{label:"数量(件)",prop:"productNum"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.productNum,callback:function(e){t.$set(t.materialForm,"productNum",e)},expression:"materialForm.productNum"}})],1),o("el-form-item",{attrs:{label:"供应商",prop:"manufacturer"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.manufacturer,callback:function(e){t.$set(t.materialForm,"manufacturer",e)},expression:"materialForm.manufacturer"}})],1),o("el-form-item",{attrs:{label:"重量(kg)",prop:"productWeight"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.materialForm.productWeight,callback:function(e){t.$set(t.materialForm,"productWeight",e)},expression:"materialForm.productWeight"}})],1)],1)],1),o("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[o("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)]),o("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"","current-page":t.current,"page-sizes":[5,10,20],"page-size":t.limit,layout:"total,prev,pager,next,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},i=[],l={created:function(){this.fetchPageData(1,10)},data:function(){return{delVisible:!1,msg:"",delarr:[],multipleSelection:[],total:0,current:1,limit:10,pages:"0",bomCondition:{productNo:"",materialNo:""},tableData:[{id:"",productNo:"",materialNo:"",materialDesc:"",stationNo:""}],editForm:{id:"",productNo:"",materialNo:"",materialDesc:"",stationNo:"",productNum:""},stationForm:[{stationNo:"",stationName:""}],materialForm:{id:"",productNo:"",materialNo:"",materialDesc:"",stationName:"",productNum:"",manufacturer:"",productWeight:""},editFormVisible:!1,queryFormVisible:!1}},methods:{onSubmit:function(){this.fetchPageData(1,10)},deleteRow:function(){var t=this;this.$axios.delete("http://localhost:8181/mesBom/deleteBySelectIds/"+this.delarr).then((function(e){console.log(e.data),"删除成功"==e.data?t.$router.go(0):alert("删除失败")})),this.delarr=[],this.delVisible=!1},handleDelete:function(t,e){this.idx=t,this.msg=e,this.delarr.push(this.msg.id),this.delVisible=!0,console.log(this.delarr)},deleteAll:function(){this.delVisible=!0;for(var t=this.multipleSelection.length,e=0;e<t;e++)this.delarr.push(this.multipleSelection[e].id);console.log(this.delarr)},handleQuery:function(t,e){this.queryFormVisible=!0,this.materialForm=Object.assign({},e),this.materialForm.index=t;var o=this;this.$axios.get("http://localhost:8181/mesStation/queryAllStation").then((function(t){o.stationForm=t.data})),this.$axios.get("http://localhost:8181/mesBom/queryByMaterialNo/"+e.materialNo).then((function(t){o.materialForm=t.data,console.log(o.materialForm),console.log(o.stationForm);for(var e=0;e<o.stationForm.length;e++)if(t.data.stationNo==o.stationForm[e].stationNo){o.materialForm.stationName=o.stationForm[e].stationName;break}}))},handleEdit:function(t,e){this.editFormVisible=!0,this.editForm=Object.assign({},e),this.editForm.index=t,this.editForm.stationNo="";var o=this;this.$axios.get("http://localhost:8181/mesStation/queryAllStation").then((function(t){o.stationForm=t.data}))},handleInsert:function(){this.insertFormVisible=!0},handleCancel:function(t){this.editFormVisible=!1},handleUpdate:function(t){var e=this;this.$axios.put("http://localhost:8181/mesBom/updateBom",this.editForm).then((function(t){console.log(t.data),"修改成功"==t.data?e.$router.go(0):alert(t.data)})),this.editFormVisible=!1},typeIndex:function(t){var e=this;return(e.current-1)*e.limit+t+1},fetchPageData:function(t,e){var o=this;this.$axios.post("http://localhost:8181/mesBom/queryByList/"+t+"/"+e,this.bomCondition).then((function(t){console.log(t.data.data),o.tableData=t.data.data,o.total=t.data.total,o.pages=t.data.pages}))},handleSizeChange:function(t){var e=this;e.limit=t,e.fetchPageData(e.current,e.limit)},handleCurrentChange:function(t){var e=this;e.current=t,e.fetchPageData(e.current,e.limit)},handleSelectionChange:function(t){this.multipleSelection=t}}},r=l,n=(o("84d3"),o("2877")),s=Object(n["a"])(r,a,i,!1,null,"4de13a44",null);e["default"]=s.exports}}]);