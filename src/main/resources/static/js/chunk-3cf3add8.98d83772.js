(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cf3add8"],{"371d":function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px","margin-left":"25px"},attrs:{inline:!0,model:t.productCondition}},[l("el-form-item",{attrs:{label:"产品编号"}},[l("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch1,placeholder:"请输入产品编号查询","trigger-on-focus":!1,clearable:""},on:{select:t.handleSelect},model:{value:t.productCondition.productNo,callback:function(e){t.$set(t.productCondition,"productNo",e)},expression:"productCondition.productNo"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSubmit}},[t._v("查询 ")])],1),l("el-form-item",[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete "},on:{click:t.deleteAll}},[t._v("批量删除 ")])],1),l("el-form-item",{staticStyle:{float:"right"}},[l("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8181/mesBom/importBom","on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,multiple:"","on-success":t.refresh,limit:3,"on-exceed":t.handleExceed}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"}},[t._v("导入BOM表 ")])],1)],1)],1),l("el-table",{ref:"multipleTable",staticClass:"tablessp",staticStyle:{width:"100%","margin-top":"8px","min-height":"700px"},attrs:{data:t.tableData,height:"200","highlight-current-row":"",fit:"",border:"","default-sort":{prop:"date",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),l("el-table-column",{attrs:{align:"center",label:"序号",width:"95",type:"index",index:t.typeIndex}}),l("el-table-column",{attrs:{prop:"productNo",label:"产品编号",align:"center",sortable:"",width:"180"}}),l("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-view"},on:{click:function(l){return t.handleQuery(e.$index,e.row)}}},[t._v("查看产品物料 ")]),l("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-delete",type:"danger"},on:{click:function(l){return t.handleDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1),l("el-dialog",{attrs:{title:"产品物料",visible:t.dialogTableVisible,width:"80%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[l("el-table",{attrs:{data:t.productBomData}},[l("el-table-column",{attrs:{align:"center",label:"序号",width:"95",type:"index",index:t.typeIndex}}),l("el-table-column",{attrs:{align:"center",property:"stationNo",label:"工位号",width:"150"}}),l("el-table-column",{attrs:{align:"center",property:"materialNo",label:"物料编号",width:"250"}}),l("el-table-column",{attrs:{align:"center",property:"materialDesc",label:"物料描述",width:"350"}}),l("el-table-column",{attrs:{align:"center",property:"productNum",label:"数量(件)",width:"100"}})],1)],1),l("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[l("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)]),l("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"","current-page":t.current,"page-sizes":[5,10,20],"page-size":t.limit,layout:"total,prev,pager,next,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],n=(l("4de4"),l("d81d"),l("99af"),l("b0c0"),{created:function(){this.fetchPageData(1,10)},mounted:function(){this.queryAllProductNo()},data:function(){return{delVisible:!1,msg:"",delarr:[],multipleSelection:[],total:0,current:1,limit:10,pages:"0",productNoList:"",productCondition:{productNo:""},tableData:[{id:"",productNo:""}],productBomData:[{id:"",stationNo:"",materialNo:"",materialDesc:"",productNum:""}],dialogTableVisible:!1}},methods:{handleSelect:function(t){console.log(t)},querySearch1:function(t,e){var l=this.productNoList,i=t?l.filter(this.createFilter1(t)):l;e(i)},createFilter1:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},queryAllProductNo:function(){var t=[],e=this;this.$axios.get("http://localhost:8181/mesProduct/queryAllProductNo").then((function(l){t=l.data.map((function(t){return{value:t}})),console.log(t),e.productNoList=t}))},refresh:function(t,e,l){this.$router.go(0)},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},onSubmit:function(){this.fetchPageData(1,10)},deleteRow:function(){var t=this;this.$axios.delete("http://localhost:8181/mesProduct/deleteBySelectIds/"+this.delarr).then((function(e){console.log(e.data),"删除成功"==e.data?t.$router.go(0):alert("删除失败")})),this.delarr=[],this.delVisible=!1},handleDelete:function(t,e){this.idx=t,this.msg=e,this.delarr.push(this.msg.id),this.delVisible=!0,console.log(this.delarr)},deleteAll:function(){this.delVisible=!0;for(var t=this.multipleSelection.length,e=0;e<t;e++)this.delarr.push(this.multipleSelection[e].id);console.log(this.delarr)},handleInsert:function(){this.insertFormVisible=!0},handleQuery:function(t,e){this.dialogTableVisible=!0;var l=this;this.$axios.get("http://localhost:8181/mesBom/queryByProductNo/"+e.productNo).then((function(t){console.log(t.data),l.productBomData=t.data}))},handleCancel:function(t){this.editFormVisible=!1},typeIndex:function(t){var e=this;return(e.current-1)*e.limit+t+1},fetchPageData:function(t,e){var l=this;this.$axios.post("http://localhost:8181/mesProduct/queryByList/"+t+"/"+e,this.productCondition).then((function(t){console.log(t.data.data),l.tableData=t.data.data,l.total=t.data.total,l.pages=t.data.pages}))},handleSizeChange:function(t){var e=this;e.limit=t,e.fetchPageData(e.current,e.limit)},handleCurrentChange:function(t){var e=this;e.current=t,e.fetchPageData(e.current,e.limit)},handleSelectionChange:function(t){this.multipleSelection=t}}}),a=n,r=(l("bb7d"),l("2877")),c=Object(r["a"])(a,i,o,!1,null,"59165c1d",null);e["default"]=c.exports},"97c4":function(t,e,l){},bb7d:function(t,e,l){"use strict";l("97c4")}}]);