(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69b977a1"],{4289:function(t,e,a){},"46e9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px","margin-left":"25px"},attrs:{inline:!0,model:t.planCondition}},[a("el-form-item",{attrs:{label:"计划号"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch1,placeholder:"请输入计划编号查询","trigger-on-focus":!1,clearable:""},on:{select:t.handleSelect},model:{value:t.planCondition.planNo,callback:function(e){t.$set(t.planCondition,"planNo",e)},expression:"planCondition.planNo"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期","picker-options":t.pickerOptions},model:{value:t.planCondition.beginTime,callback:function(e){t.$set(t.planCondition,"beginTime",e)},expression:"planCondition.beginTime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期","picker-options":t.pickerOptions},model:{value:t.planCondition.endTime,callback:function(e){t.$set(t.planCondition,"endTime",e)},expression:"planCondition.endTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSubmit}},[t._v("查询 ")])],1)],1),a("el-table",{ref:"multipleTable",staticClass:"tablessp",staticStyle:{width:"100%","margin-top":"8px","min-height":"700px"},attrs:{data:t.tableData,height:"200","highlight-current-row":"",fit:"",border:"","default-sort":{prop:"date",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"95",type:"index",index:t.typeIndex}}),a("el-table-column",{attrs:{prop:"planDate",label:"计划日期",align:"center",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"planNo",label:"计划号",align:"center",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"productNo",label:"产品型号",align:"center",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"planNum",label:"计划数量",align:"center",sortable:"",width:"120"}}),a("el-table-column",{attrs:{prop:"actualNum",label:"合格数量",align:"center",sortable:"",width:"120"}}),a("el-table-column",{attrs:{prop:"failNum",label:"不合格数量",align:"center",sortable:"",width:"120"}}),a("el-table-column",{attrs:{prop:"weldingFinishNum",label:"已补焊数量",align:"center",sortable:"",width:"120"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"mini",round:"",icon:"el-icon-check"},on:{click:function(a){return t.handleFinish(e.$index,e.row)}}},[t._v("补焊完成 ")])]}}])})],1),a("el-dialog",{attrs:{title:"提示",visible:t.finishVisible,width:"300px",center:""},on:{"update:visible":function(e){t.finishVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("确定该计划已经全部补焊完成吗？(确认后补焊数量会增加至完成数量中)")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.finishVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.finishRow}},[t._v("确 定")])],1)]),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"","current-page":t.current,"page-sizes":[5,10,20],"page-size":t.limit,layout:"total,prev,pager,next,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],l=(a("4de4"),a("ac1f"),a("5319"),{created:function(){this.fetchPageData(1,10)},data:function(){return{delVisible:!1,msg:"",delarr:[],multipleSelection:[],total:0,current:1,limit:10,pages:"0",planNoList:"",productForm:[{productNo:""}],planCondition:{planNo:"",planStatus:"",beginTime:"",endTime:""},tableData:[{id:"",planDate:"",planSchedule:"",planNo:"",productNo:"",planNum:"",weldingFinishNum:"",actualNum:"",planStatus:"",status:""}],productBomData:[{id:"",stationNo:"",materialNo:"",materialDesc:"",productNum:""}],fixId:"",finishVisible:!1,dialogTableVisible:!1,pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},methods:{onSubmit:function(){this.fetchPageData(1,10)},handleSelect:function(t){console.log(t)},querySearch1:function(t,e){var a=this.planNoList,i=t?a.filter(this.createFilter1(t)):a;e(i)},createFilter1:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},finishRow:function(){var t=this;this.$axios.get("http://localhost:8181/mesPrimaryProducePlan/fixPlanById/"+this.fixId).then((function(e){console.log(e.data),"补焊成功"==e.data&&t.reload()})),this.delarr=[],this.delVisible=!1},handleFinish:function(t,e){this.idx=t,this.msg=e,this.finishVisible=!0,this.fixId=e.id},typeIndex:function(t){var e=this;return(e.current-1)*e.limit+t+1},fetchPageData:function(t,e){var a=this;this.$axios.post("http://localhost:8181/mesPrimaryProducePlan/queryByListByFix/"+t+"/"+e,this.planCondition).then((function(t){console.log(t.data.data);for(var e=0;e<t.data.data.length;e++){console.log(t.data.data[e].weldingFinishNum);var i=new Date(+new Date(t.data.data[e].planDate)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");t.data.data[e].planDate=i}a.tableData=t.data.data,a.total=t.data.total,a.pages=t.data.pages}))},handleSizeChange:function(t){var e=this;e.limit=t,e.fetchPageData(e.current,e.limit)},handleCurrentChange:function(t){var e=this;e.current=t,e.fetchPageData(e.current,e.limit)},handleSelectionChange:function(t){this.multipleSelection=t}},inject:["reload"]}),o=l,r=(a("5ede"),a("2877")),s=Object(r["a"])(o,i,n,!1,null,"0ea58754",null);e["default"]=s.exports},"5ede":function(t,e,a){"use strict";a("4289")}}]);